<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>კალკულატორი</title>
    <link rel="shortcut icon" type="image/png" href="favicon.ico">
    <style>
        * {
            margin: 0;
            padding: 0;
            font-family: sans-serif;
            box-sizing: border-box;
        }

        html, body {
            overflow: hidden;
        }
        .container {
            width: 100%;
            height: 100vh;
            background: lightcoral;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .calculator {
            background: #DFDFDF;
            padding: 20px;
            border-radius: 16px;
        }

        footer {
            font-family: sans-serif;
            position: fixed;
            bottom: 0;
            width: 100%;
            background-color: lightcoral;
            text-align: center;
        }

        @media (max-width: 768px) {
            .calculator {
                margin-top: 22px; /* Move the calculator down on mobile */
            }
        }

        .calculator form input {
            border: 0;
            outline: 0;
            width: 60px;
            height: 60px;
            border-radius: 10px;
            box-shadow: -8px -8px 15px rgba(255, 255, 255, 0.1), 5px 5px 15px rgba(0, 0, 0, 0.2);
            background: transparent;
            font-size: 20px;
            color: black;
            cursor: pointer;
            margin: 10px;
        }

        form .display {
            display: flex;
            justify-content: flex-end;
            margin: 20px 0;
            border: 2px solid #5A5C5E;
            border-radius: 8px;
            background-color: #80BBCD;
            position: relative;
        }

        form .display::before {
            position: absolute;
            content: "";
            top: 70%;
            height: 1px;
            min-width: 97%;
            right: 5px;
            opacity: 70%;
            background: #5A818E;
        }

        form .display input {
            text-align: right;
            flex: 1;
            font-size: 45px;
            box-shadow: none;
        }

        form input[type="button"]:active {
            transform: translateY(2px);
            background-color: #D9D9D9;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="calculator">
        <form>
            <div class="display">
                <input type="text" name="display" id="display">
            </div>
            <div>
                <input type="button" value="სწ" onclick="clearDisplay()"

                    style="background-color: #DF908A; border-bottom: 2px solid #C13A33; border-right: 2px solid #C13A33; border-left: 2px solid #C13A33;">

                <input type="button" value="%" onclick="addPercentage()"
                    style="background-color: #ACB0B9; border-bottom: 2px solid #707787; border-right: 2px solid #707787; border-left: 2px solid #707787;">

                <input type="button" value="+/-" onclick="toggleSign()"
                    style="background-color: #ACB0B9; border-bottom: 2px solid #707787; border-right: 2px solid #707787; border-left: 2px solid #707787;">

                <input type="button" value="÷" onclick="addToDisplay('÷')" style="background-color: #ACB0B9; border-bottom: 2px solid #707787; border-right: 2px solid #707787; border-left: 2px solid #707787;">

            </div>
            <div>
                <input type="button" value="7" onclick="addToDisplay('7')" style="background-color: #B8B8AE; border-bottom: 2px solid #87877A; border-right: 2px solid #87877A; border-left: 2px solid #87877A;">

                <input type="button" value="8" onclick="addToDisplay('8')" style="background-color: #B8B8AE; border-bottom: 2px solid #87877A; border-right: 2px solid #87877A; border-left: 2px solid #87877A;">

                <input type="button" value="9" onclick="addToDisplay('9')" style="background-color: #B8B8AE; border-bottom: 2px solid #87877A; border-right: 2px solid #87877A; border-left: 2px solid #87877A;">

                <input type="button" value="×" onclick="addToDisplay('×')" style="background-color: #ACB0B9; border-bottom: 2px solid #707787; border-right: 2px solid #707787; border-left: 2px solid #707787;">

            </div>
            <div>
                <input type="button" value="4" onclick="addToDisplay('4')" style="background-color: #B8B8AE; border-bottom: 2px solid #87877A; border-right: 2px solid #87877A; border-left: 2px solid #87877A;">

                <input type="button" value="5" onclick="addToDisplay('5')" style="background-color: #B8B8AE; border-bottom: 2px solid #87877A; border-right: 2px solid #87877A; border-left: 2px solid #87877A;">

                <input type="button" value="6" onclick="addToDisplay('6')" style="background-color: #B8B8AE; border-bottom: 2px solid #87877A; border-right: 2px solid #87877A; border-left: 2px solid #87877A;">

                <input type="button" value="-" onclick="addToDisplay('-')" style="background-color: #ACB0B9; border-bottom: 2px solid #707787; border-right: 2px solid #707787; border-left: 2px solid #707787;">
            </div>
            <div>
                <input type="button" value="1" onclick="addToDisplay('1')" style="background-color: #B8B8AE; border-bottom: 2px solid #87877A; border-right: 2px solid #87877A; border-left: 2px solid #87877A;">

                <input type="button" value="2" onclick="addToDisplay('2')" style="background-color: #B8B8AE; border-bottom: 2px solid #87877A; border-right: 2px solid #87877A; border-left: 2px solid #87877A;">

                <input type="button" value="3" onclick="addToDisplay('3')" style="background-color: #B8B8AE; border-bottom: 2px solid #87877A; border-right: 2px solid #87877A; border-left: 2px solid #87877A;">

                <input type="button" value="+" onclick="addToDisplay('+')" style="background-color: #ACB0B9; border-bottom: 2px solid #707787; border-right: 2px solid #707787; border-left: 2px solid #707787;">

            </div>
            <div>
                <input type="button" value="0" onclick="addToDisplay('0')" style="background-color: #B8B8AE; border-bottom: 2px solid #87877A; border-right: 2px solid #87877A; border-left: 2px solid #87877A;">

                <input type="button" value="." onclick="addToDisplay('.')" style="background-color: #B8B8AE;border-bottom: 2px solid #87877A; border-right: 2px solid #87877A; border-left: 2px solid #87877A;">

                <input type="button" value="⌫" onclick="backspace()" style="background-color: #B8B8AE; border-bottom: 2px solid #87877A; border-right: 2px solid #87877A; border-left: 2px solid #87877A;">

                <input type="button" value="=" onclick="calculateResult()" style="background-color: #EFAA5F; color: black; border-bottom: 2px solid #E86D27; border-right: 2px solid #E86D27; border-left: 2px solid #E86D27;">

            </div>
        </form>
    </div>
</div>
    <footer>
        &copy; 2023 GSU
    </footer>
<script>
    let display = document.getElementById('display');
    let lastChar = '';

    function addToDisplay(value) {
        // Prevent adding operators consecutively
        if (['+', '-', '×', '÷'].includes(lastChar) && ['+', '-', '×', '÷'].includes(value)) {
            return;
        }

        // Prevent adding % consecutively
        if (lastChar === '%' && value === '%') {
            return;
        }

        // Append the value to the display and update lastChar
        display.value += value;
        lastChar = value;
    }

    function addPercentage() {
        // Add % to the display if it's not already there
        if (lastChar !== '%') {
            display.value += '%';
            lastChar = '%';
        }
    }

    function calculateResult() {
        try {
            // Replace ÷, ×, and % with /, *, and /100 respectively for evaluation
            const expression = display.value.replace(/÷/g, '/').replace(/×/g, '*').replace(/%/g, '/100');
            display.value = eval(expression);
        } catch (error) {
            // Handle errors by displaying "Error"
            display.value = 'Error';
        }
    }

    function clearDisplay() {
        // Clear the display
        display.value = '';
    }

    function toggleSign() {
        // Toggle the sign (positive/negative) of the displayed number
        if (display.value.charAt(0) === '-') {
            display.value = display.value.slice(1);
        } else {
            display.value = '-' + display.value;
        }
    }

    function backspace() {
        // Remove the last character from the display
        display.value = display.value.slice(0, -1);
    }

    // Event listener for keyboard input
    document.addEventListener('keydown', (event) => {
        const key = event.key;

    document.body.style.overflow = 'hidden';
        
        // Allow numeric keys and some special keys
        if (/^[0-9%\+\-\*\/\.\r\n]$/.test(key)) {
            addToDisplay(key);
        } else if (key === 'Enter') {
            calculateResult();
        } else if (key === 'Escape') {
            clearDisplay();
        } else if (key === 'Backspace') {
            backspace();
        }

        event.preventDefault(); // Prevent default action (e.g., page scrolling)
    });
</script>
</body>
</html>
